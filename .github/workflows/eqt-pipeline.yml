name: EQT Pipeline Automation
on:
  issues:
    types: [opened, labeled, closed, reopened, assigned]
  pull_request:
    types: [opened, synchronize, closed, review_requested]
  workflow_dispatch:

jobs:
  automate-status:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: è‡ªåŠ¨è®¾ç½®æ–°Issueåˆ°ğŸŒ±æ–°èŠ½
      uses: actions/github-script@v7
      if: github.event.action == 'opened' && github.event.issue.pull_request == null
      with:
        script: |
          await github.rest.projects.createCard({
            column_id: "${{ secrets.SEED_OPTION_ID }}",
            content_type: "Issue",
            content_id: context.issue.id
          });
          await github.rest.issues.update({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            labels: ['ğŸŒ±-seed']
          });
          await github.rest.issues.update({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: `## ğŸ¯ EQTç ”ç©¶æµç¨‹\n\n**å½“å‰é˜¶æ®µ**: ğŸŒ± æ–°èŠ½\n**ä¼˜å…ˆçº§**: [è¯·é€‰æ‹©]\n**é¢†åŸŸ**: [è¯·é€‰æ‹©]\n**AIéœ€æ±‚**: \n**é¢„æµ‹**: \n**ä¸“å®¶**: \n\n---\n*ç”± EQT Pipeline è‡ªåŠ¨åˆ›å»º*`
          });
