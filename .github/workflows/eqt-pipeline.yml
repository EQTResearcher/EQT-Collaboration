name: EQT Pipeline Automation
on:
  issues:
    types: [opened, labeled, closed, reopened, assigned]
  pull_request:
    types: [opened, synchronize, closed, review_requested]
  workflow_dispatch:

jobs:
  automate-status:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: è‡ªåŠ¨è®¾ç½®æ–°Issueåˆ°ğŸŒ±æ–°èŠ½
      uses: actions/github-script@v7
      if: github.event.action == 'opened' && github.event.issue.pull_request == null
      with:
        script: |
          try {
            // æ·»åŠ Issueåˆ°é¡¹ç›®çœ‹æ¿
            await github.rest.projects.createCard({
              column_id: "${{ secrets.SEED_OPTION_ID }}",
              content_id: context.issue.id,
              content_type: "Issue"
            });
            
            // æ›´æ–°Issueæ ‡ç­¾
            await github.rest.issues.addLabels({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              labels: ['ğŸŒ±-seed']
            });
            
            // æ›´æ–°Issueå†…å®¹
            await github.rest.issues.update({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: context.issue.number,
              body: `## ğŸ¯ EQTç ”ç©¶æµç¨‹\n\n**å½“å‰é˜¶æ®µ**: ğŸŒ± æ–°èŠ½\n**ä¼˜å…ˆçº§**: [è¯·é€‰æ‹©]\n**é¢†åŸŸ**: [è¯·é€‰æ‹©]\n**AIéœ€æ±‚**: \n**é¢„æµ‹**: \n**ä¸“å®¶**: \n\n---\n*ç”± EQT Pipeline è‡ªåŠ¨åˆ›å»º*`
            });
            
            console.log('Issueè‡ªåŠ¨åŒ–è®¾ç½®å®Œæˆ');
          } catch (error) {
            console.error('è‡ªåŠ¨åŒ–è¿‡ç¨‹å‡ºé”™:', error);
          }
