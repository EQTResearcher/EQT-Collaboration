name: EQT Kanban Automation

on:
  issues:
    types: [opened, labeled, closed]
  pull_request:
    types: [opened, closed, edited]
  issue_comment:
    types: [created]

jobs:
  update_status_based_on_labels:
    runs-on: ubuntu-latest
    if: github.event.issue || github.event.pull_request
    steps:
      # æ­¤æ­¥éª¤éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹Actionæˆ–æ›´å¤æ‚çš„è„šæœ¬å®ç°ç²¾ç¡®çš„é¡¹ç›®å¡çŠ¶æ€æ›´æ–°
      # ä»¥ä¸‹æ˜¯é€»è¾‘æè¿°ï¼Œå®é™…å®ç°å¯èƒ½éœ€è¦ä½¿ç”¨ `actions/github-script` ç­‰
      - name: Update project card status
        env:
          LABEL_ADDED: ${{ github.event.label.name }}
        run: |
          # é€»è¾‘ï¼šå½“ç‰¹å®šæ ‡ç­¾è¢«æ·»åŠ æ—¶ï¼Œå°†å¯¹åº”çš„é¡¹ç›®å¡ç§»åŠ¨åˆ°ç›¸åº”çŠ¶æ€åˆ—
          # ä¾‹å¦‚ï¼šå¦‚æœæ·»åŠ äº† "ğŸ” exploring" æ ‡ç­¾ï¼Œåˆ™å°†å¡ç‰‡çŠ¶æ€è®¾ç½®ä¸º "ğŸ” è®ºè¯ä¸­ (Exploring)"
          # ç”±äºç›´æ¥æ“ä½œProjects APIè¾ƒå¤æ‚ï¼Œå»ºè®®ä½¿ç”¨é¢„æ„å»ºçš„Actionæˆ–è¯¦ç»†è„šæœ¬
        # è¯·æ³¨æ„ï¼šä¸Šè¿°runå—å†…çš„é€»è¾‘ä¸ºç¤ºä¾‹ï¼Œéœ€è¦å…·ä½“ä»£ç å®ç°

  notify_on_new_seed:
    runs-on: ubuntu-latest
    if: github.event_name == 'issues' && github.event.action == 'opened'
    steps:
      - name: Comment on new seed issue
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: 'æ¬¢è¿æ–°çš„ç ”ç©¶è®®é¢˜ï¼@EQT-AI-Botï¼Œè¯·æ‰§è¡Œä¸€è‡´æ€§æ£€æŸ¥ã€‚'
            })
