name: EQT Kanban Automation

on:
  issues:
    types: [opened, labeled, closed]
  pull_request:
    types: [opened, closed, edited]
  issue_comment:
    types: [created]

jobs:
  update_status_based_on_labels:
    runs-on: ubuntu-latest
    if: github.event.issue || github.event.pull_request
    steps:
      # 此步骤需要借助第三方Action或更复杂的脚本实现精确的项目卡状态更新
      # 以下是逻辑描述，实际实现可能需要使用 `actions/github-script` 等
      - name: Update project card status
        env:
          LABEL_ADDED: ${{ github.event.label.name }}
        run: |
          # 逻辑：当特定标签被添加时，将对应的项目卡移动到相应状态列
          # 例如：如果添加了 "🔍 exploring" 标签，则将卡片状态设置为 "🔍 论证中 (Exploring)"
          # 由于直接操作Projects API较复杂，建议使用预构建的Action或详细脚本
        # 请注意：上述run块内的逻辑为示例，需要具体代码实现

  notify_on_new_seed:
    runs-on: ubuntu-latest
    if: github.event_name == 'issues' && github.event.action == 'opened'
    steps:
      - name: Comment on new seed issue
        uses: actions/github-script@v7
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: '欢迎新的研究议题！@EQT-AI-Bot，请执行一致性检查。'
            })
